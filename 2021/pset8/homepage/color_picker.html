<!DOCTYPE html>

<html lang="en">
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
        <link href="styles.css" rel="stylesheet">
        <title>Color Picker</title>
    </head>
    <body>
        <h1 class="title">Color picker</h1>

        <table id="nav">
            <tr>
                <th><a href="index.html">Homepage</a></th>
                <th><a href="color_picker.html">Color picker</a></th>
                <th><a href="useless.html">Useless</a></th>
                <th><a href="font_size.html">Font Size</a></th>
            </tr>
        </table>

        <div class="center">
            <p>
                Input an RGB combination to see what color it is.
            </p>
            <p>
                Each number should be an integer in the range 0-255.
            </p>
        </div>
        <div class="text-center">
            <table id="colorpicker">
                <tr>
                    <td class="colorlabel">R: <form><input id="R" type="text" value="255"></form></td>
                </tr>
                <tr>
                    <td class="colorlabel">G: <form><input id="G" type="text" value="255"></form></td>
                </tr>
                <tr>
                    <td class="colorlabel">B: <form><input id="B" type="text" value="255"></form></td>
                </tr>
            </table>
            <button id="show" type="button" class="btn btn-primary">show</button>
        </div>
        <div>
            <table>
                <tr>
                    <td id="hexcode">#ffffff</td>
                </tr>

            </table>
        </div>

    </body>

    <script>

// ------1---------2--------3---------4---------5---------6---------7---------8
	    function convertToHex(rvalue, gvalue, bvalue){
	        //hexvalue = 0x0;

            // https://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hexadecimal-in-javascript
            // https://www.w3schools.com/jsref/jsref_parseint.asp
            rDec = parseInt(rvalue, 10);
            gDec = parseInt(gvalue, 10);
            bDec = parseInt(bvalue, 10);

            rHex = rDec.toString(16);
            gHex = gDec.toString(16);
            bHex = bDec.toString(16);

            console.log(rHex);
            console.log(gHex);
            console.log(bHex);

            // not the most efficient code
            if (rHex.length < 2)
            {
                rHex = ('0' + rHex)
            }
            if (gHex.length < 2)
            {
                gHex = ('0' + gHex)
            }
            if (bHex.length < 2)
            {
                bHex = ('0' + bHex)
            }



            hexString = ('#' + rHex.toString() + gHex.toString() + bHex.toString());
            console.log("hexString:");
            console.log(hexString);

            // hexvalue = parseInt(hexString, 16);
            // console.log(hexvalue);

	        return hexString;
	    }

// ------1---------2--------3---------4---------5---------6---------7---------8\
function updateBgColor()
{
    rvalue = document.querySelector('#R').value;
	        gvalue = document.querySelector('#G').value;
	        bvalue = document.querySelector('#B').value;

            if (rvalue > 255)
            {
                rvalue = '255';
                document.querySelector('#R').value = '255';
            }
            if (gvalue > 255)
            {
                gvalue = '255';
                document.querySelector('#G').value = '255';
            }
            if (bvalue > 255)
            {
                bvalue = '255';
                document.querySelector('#B').value = '255';
            }

            if (rvalue < 0)
            {
                rvalue = '0';
                document.querySelector('#R').value = '0';
            }
            if (gvalue < 0)
            {
                gvalue = '0';
                document.querySelector('#G').value = '0';
            }
            if (bvalue < 0)
            {
                bvalue = '0';
                document.querySelector('#B').value = '0';
            }

            //console.log(rvalue);
            //console.log(gvalue);
            //console.log(bvalue);

	        hexcolor = convertToHex(rvalue, gvalue, bvalue)
            console.log('Return')
            console.log(hexcolor)
	        document.querySelector('body').style.backgroundColor = hexcolor;
	        document.querySelector('#hexcode').innerHTML = hexcolor;
}

// ------1---------2--------3---------4---------5---------6---------7---------8
document.querySelector('#R').addEventListener('change',updateBgColor)
document.querySelector('#G').addEventListener('change',updateBgColor)
document.querySelector('#B').addEventListener('change',updateBgColor)
document.querySelector('#show').addEventListener('onclick',updateBgColor)


    </script>

</html>